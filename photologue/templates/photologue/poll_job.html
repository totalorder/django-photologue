{% extends "admin/base_site.html" %}
{% load i18n admin_urls admin_static admin_modify %}

{% block extrahead %}{{ block.super }}
{% if not processing_finished %}
    <meta http-equiv="refresh" content="3" />
{% endif %}
<script type="text/javascript" src="{% url 'admin:jsi18n' %}"></script>
{{ media }}
{% endblock %}

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}" />{% endblock %}

{% block coltype %}colM{% endblock %}

{% block bodyclass %}{{ opts.app_label }}-{{ opts.object_name.lower }} change-form{% endblock %}

{% if not is_popup %}
{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
    &rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_label|capfirst|escape }}</a>
    &rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
</div>
{% endblock %}
{% endif %}

{% block content %}<div id="content-main">
    <h1>Processing images for gallery {{ gallery.title }}...</h1>
    <p>{{ completed }} of {{ total }} finished. ({{ failed|length }} failed). {% if processing_finished %} All processing finished.{% endif %}</p>
    {% if failed %}
    <p>
        Failures:
        <ul class="messagelist">
            {% for failure in failed %}
                <li class="error">Photo {{ failure.filename }} failed with error "{{ failure.error }}".</li>
            {% endfor %}
        </ul>
    </p>
    {% endif %}
    <a href="{% url opts|admin_urlname:'changelist' %}">Go to Gallery</a>
{% endblock %}